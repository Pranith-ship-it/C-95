<html>
    <head>
        <title>Kwitter Room page</title>
        <script src="https://www.gstatic.com/firebasejs/7.6.2/firebase-app.js"></script> 
        <script src="https://www.gstatic.com/firebasejs/7.6.2/firebase-firestore.js"></script> 
        <script src="https://www.gstatic.com/firebasejs/live/3.1/firebase.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Yeon+Sung&display=swap" rel="stylesheet"><meta name="viewport" content="width=device-width, initial-scale=1">
    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="kwitter.js"></script>
    </head>
    <body>
        <div class="container">
            <button id="logout" onclick="log_out();" class=" glyphicon glyphicon-log-out btn btn-danger">Logout</button>
            <center>
                <h1 class="header">Kwitter <sup>
                    <img src="m2.png">
                </sup>
            </h1>
            <h3 class="color-white" id="user_name"></h3>
            <div class="form-group input_div_room_page">
            <label>#Add Room</label>
            <input type="text" id="room_name" class="form-control" placeholder="#Room name">
            
            </div>
             <button onclick="addRoom();" class="btn btn-success">#Add Room</button>
             <h3 class="color-white">#Trending Rooms</h3>
             <div id="output"></div>
            </center>
        </div>
    </body>
    <script type="text/javascript">
    var firebaseConfig = {
      apiKey: "AIzaSyBq6ev3PyUQfejZXqlUQPV4UMJTGYJRywU",
      authDomain: "kwitter-f748b.firebaseapp.com",
      projectId: "kwitter-f748b",
      storageBucket: "kwitter-f748b.appspot.com",
      messagingSenderId: "692356749042",
      appId: "1:692356749042:web:b07ccc8755287313e2226b"
    };
    user_name=localStorage.getItem("user_name");
    document.getElementById("user_name").innerHTML="Welcome : "+user_name+ "!";
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);

function addRoom(){
  room_name=document.getElementById("room_name").value;
  firebase.database().ref('/').child(room_name).update({
    purpose: "Adding  room name"
  });

  localStorage.setItem("room_name" , room_name);
  window.location= "kwitter_page.html"; 
}

function getData() { firebase.database().ref("/").on('value', function(snapshot) { document.getElementById("output").innerHTML = ""; snapshot.forEach(function(childSnapshot) { childKey = childSnapshot.key;
Room_names=childKey;
//start code
console.log("Room name- " + Room_names);
row="div class='room_name' id="+Room_names+"onclick='redirctToRoomName(this.id)'>#"+Room_names+"</div><hr>";
document.getElementById("output").innerHTML+=row;

});});}
getData();

function  redirctToRoomName(name){
console.log(name);
localStorage.setItem("room_name" , room_name);
window.location="kwitter_page html";
}


    </script>
</html>